### README

本次作业的主体是代码，内容是求解可压缩流动喷管问题，主要分为以下三个问题：

1. 亚声速-超声速喷管

2. 全亚声速喷管

3. 含激波喷管

   编程环境为python，以下为环境版本以及所需要装的库

* Python 3.8（python3也可）

* numpy 1.20.3

* matplotlib 3.5.1（请务必更新至最新版本，否则动画可能无法显示）

* PySide2 5.15.2.1（启动前端必备）

* pandas 1.2.1（保存数据必备）

  

项目接口十分简单，只需在命令行中进入到项目所在目标文件夹下，执行python main.py命令即可运行成功（在安装好所有所需的库之后）

运行获取前端界面

下面对前端界面的一些操作进行简要说明

1. 参数选择

界面下方为参数选择区，定义了问题的一些基本参数以及求解问题的差分方法中的一些参数设定，包括绘图的一些参数，其中有：

* 问题选择
* 柯朗数
* 比热
* 差分求解步长
* 精度
* 是否采用人工黏性
* 黏性系数C_x
* 数据保存选择

参数均有默认值（即为输入框灰色部分）若未输入，则按默认参数求解

注意：1. 仅问题3设置人工黏性算法，在问题1、2中选择人工黏性与不选择结果相同

2. 选定问题3后，后端会自动将差分求解的dx改为0.05（否则精度不够）同时，考虑到Maccormack算法在激波问题上的残差，在选定问题3且不添加人工黏性的情况下，后端自动将精度切换为1e-3以保证能够成功绘图

2. 图像

图像区共有两个按钮以及四个选择按钮。

四个选择按钮即选择绘制何物理量的数值解与精确解之间的关系。

* 画图，即在确定问题参数情况下点击，会差分求解问题并绘制流线显示在图像区
* 清屏，对图像区的图像进行清除操作

如果在参数选择区选定了数据保存，则会在main.py的文件目录下生成一个.xlsx文件，记录了对应物理量稳定的最终数值解

注意：1. 只有点击了绘图按钮才能保存数据

3. 收敛动画

收敛动画区共有四个按钮以及四个选择按钮。

四个选择按钮即选择绘制何物理量的收敛动画。

四个按钮的作用分别为：

1. 动画。在左侧选择之后，绘制收敛动画
2. 暂停。暂停当前绘制动画的过程
3. 继续。继续绘制动画
4. 清屏。清除画布

同时，注意到左上角有个num，显示的是当前为多少时间步的结果

此处动画没有参照书上绘制喷管内某点的物理量随时间变化的关系，而是绘制了全场的物理量，通过动画的形式展示其收敛过程。

同时如果在保存数据区选择，则点动画时会保存整个迭代过程对应的物理量变化，在main.py文件目录下生成一个.xlsx文件

在这里对激波问题以及人工黏性的处理与图像部分相同，不再赘述。



两个画布下方有一个toolbar，可以对生成图像进行一系列操作，包括：

* 移动图像
* 放大局部图像
* 调节图像参数
* 设置横纵坐标范围
* 保存图像



注意：

1. 在差分求解中内置了循环次数，默认设定为5000次。超过5000次迭代会停止并报错。
2. 每次绘图和动画需要一定的时长不等，当运行5000步是大约用时15s，请注意命令行中的报错信息，可能因为参数设置不当导致无法输出图像。

